import { BotContext } from '../bot';
import { CONFIG } from '../config';
import { safeEditOrReply } from '../utils/safe-edit';

export const trueskillDetailsCommand = async (ctx: BotContext): Promise<void> => {
  try {
    let message = `üß† <b>TrueSkill - —É–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤</b>\n\n`;

    message += `<b>üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:</b>\n`;
    message += `‚Ä¢ –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –∏–º–µ–µ—Ç –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:\n`;
    message += `  - –ú—é (—Å—Ä–µ–¥–Ω–∏–π –Ω–∞–≤—ã–∫): –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 25\n`;
    message += `  - –°–∏–≥–º–∞ (–Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å): –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ 8.33\n\n`;

    message += `<b>üéÆ –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –º–∞—Ç—á–∞:</b>\n`;
    message += `‚Ä¢ –ü–æ–±–µ–¥–∏—Ç–µ–ª–∏: —Ä–µ–π—Ç–∏–Ω–≥ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è\n`;
    message += `‚Ä¢ –ü—Ä–æ–∏–≥—Ä–∞–≤—à–∏–µ: —Ä–µ–π—Ç–∏–Ω–≥ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è\n`;
    message += `‚Ä¢ –°–∏–≥–º–∞ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è —É –≤—Å–µ—Ö (—Å–∏—Å—Ç–µ–º–∞ "—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏")\n\n`;

    message += `<b>üîÑ –ê–¥–∞–ø—Ç–∞—Ü–∏—è:</b>\n`;
    message += `‚Ä¢ –ß–µ–º –±–æ–ª—å—à–µ –∏–≥—Ä - —Ç–µ–º —Ç–æ—á–Ω–µ–µ —Ä–µ–π—Ç–∏–Ω–≥\n`;
    message += `‚Ä¢ –ù–æ–≤–∏—á–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –±–æ–ª—å—à–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞\n`;
    message += `‚Ä¢ –û–ø—ã—Ç–Ω—ã–µ –∏–≥—Ä–æ–∫–∏ - –º–∞–ª—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è\n\n`;

    message += `<b>‚öñÔ∏è –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ–±–µ–¥—ã:</b>\n`;
    message += `–°–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —à–∞–Ω—Å—ã –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã –Ω–∞ –ø–æ–±–µ–¥—É –Ω–∞ –æ—Å–Ω–æ–≤–µ TrueSkill —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤.\n\n`;

    message += `<b>üÜï –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</b>\n`;
    message += `‚è∞ <b>–ò–Ω—Ñ–ª—è—Ü–∏—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:</b>\n`;
    message += `‚Ä¢ –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –Ω–µ –∏–≥—Ä–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–µ–¥–µ–ª—å, –µ–≥–æ œÉ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è\n`;
    message += `‚Ä¢ –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –º–µ–Ω–µ–µ —É–≤–µ—Ä–µ–Ω–∞ –≤ –µ–≥–æ –Ω–∞–≤—ã–∫–µ\n`;
    message += `‚Ä¢ –ù–æ–≤–∏—á–∫–∏ –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞—é—Ç—Å—è\n\n`;
    
    message += `‚≠ê <b>MVP —Å–∏—Å—Ç–µ–º–∞:</b>\n`;
    message += `‚Ä¢ –î–æ 2 MVP –∑–∞ –º–∞—Ç—á (–ø–æ 1 –∏–∑ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã)\n`;
    message += `‚Ä¢ MVP –ø–æ–ª—É—á–∞–µ—Ç –±–æ–Ω—É—Å +${CONFIG.RATING_MVP_MU_BONUS} –∫ Œº\n`;
    message += `‚Ä¢ –ù–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –∞–¥–º–∏–Ω–æ–º –∫–æ–º–∞–Ω–¥–æ–π /mvp\n\n`;

    message += `<b>üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:</b>\n`;
    message += `‚Ä¢ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ\n`;
    message += `‚Ä¢ –£—á–µ—Ç –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏\n`;
    message += `‚Ä¢ –ü–æ–æ—â—Ä–µ–Ω–∏–µ –ª—É—á—à–∏—Ö –∏–≥—Ä–æ–∫–æ–≤\n`;
    message += `‚Ä¢ –°–ø—Ä–∞–≤–µ–¥–ª–∏–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã\n`;
    message += `‚Ä¢ –†–∞—Å—Ç–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º`;

    await safeEditOrReply(ctx, message, {
      parse_mode: 'HTML',
      reply_markup: {
        inline_keyboard: [
          [{ text: 'üìä –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏', callback_data: 'rating_settings' }],
          [{ text: 'üîô –ö –æ–ø–∏—Å–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º—ã', callback_data: 'rating_info' }],
          [{ text: 'üè† –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∏–≥—Ä–µ', callback_data: 'refresh_info' }],
          [{ text: '‚ùé –ó–∞–∫—Ä—ã—Ç—å', callback_data: 'close_menu' }],
        ],
      },
    });

  } catch (error) {
    console.error('Error in trueskill details command:', error);
    await ctx.reply('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–∫–∞–∑–µ –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.');
  }
};